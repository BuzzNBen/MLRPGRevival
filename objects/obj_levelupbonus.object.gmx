<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_leveluplakitu</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_speed = 0.275;
movechoose = 52;
moveto = 1;
value = 0;
next = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Background fades out while transitioning back to the Overworld
if background_alpha &gt; 0
{
    background_alpha[0] -= 0.1;
    with obj_mariob visible = false;
    with obj_luigib visible = false;
    if obj_battlecontrol._alpha &gt; 0
        obj_battlecontrol._alpha -= 0.1;
    obj_battlecontrol.padvisibility -= 0.1;
    alarm[4] = 1;
}
else
    with obj_battlecontrol alarm[4] = 60;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.Mexpleft &lt;= 0 //Next level up for Mario
{
    with obj_battlecontrol locked = 0;
    with obj_battlecontrol event_user(4);
    obj_mariob.image_index = 0;
    obj_mariob.image_speed = 0.275;
    obj_mariob.stance = 7;
    global.turn = -1.5;
    instance_destroy();
}
else if global.Lexpleft &lt;= 0 //Next level up for Luigi
{
    with obj_battlecontrol locked = 0;
    with obj_battlecontrol event_user(4);
    obj_mariob.visible = false;
    obj_luigib.image_index = 0;
    obj_luigib.image_speed = 0.275;
    obj_luigib.stance = 7;
    obj_luigib.visible = true;
    global.turn = -1.5;
    instance_destroy();
}
if moveto = 6 &amp;&amp; background_alpha &gt; 0 &amp;&amp; (global.Lexp &lt; global.Lexpleft or global.Mexp &lt; global.Mexpleft)
{
    with obj_mariob image_index = 0;
    with obj_mariob stance = 7;
    background_alpha[0] -= 0.1;
    obj_mariob.image_alpha -= 0.1;
    alarm[3] = 1;
}
else
{
    //Set maximum variables
    if global.turn = -1.25
    {
        global.MHP = global.maxMHP;
        global.MBP = global.maxMBP;
    }
    if global.turn = -1.75
    {
        global.LHP = global.maxLHP;
        global.LBP = global.maxLBP;
    }
    moveto = 5;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Mario's bonus is added up
if global.turn = -1.25 &amp;&amp; obj_mariob.stance = 13 &amp;&amp; moveto = 3 &amp;&amp; obj_mariob.image_single = 10
{
    audio_play_sound(snd_mario_ehee,0,0);
    moveto = 4;
}
if global.turn = -1.75 &amp;&amp; obj_luigib.stance = 13 &amp;&amp; moveto = 3 &amp;&amp; obj_luigib.image_single = 10
{
    audio_play_sound(snd_luigi_hahaha,0,0);
    moveto = 4;
}
if moveto = 4 &amp;&amp; !audio_is_playing(snd_mario_ehee) &amp;&amp; !audio_is_playing(snd_luigi_hahaha)
    alarm[3] = 45;
else
    alarm[2] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Add up bonus
if global.turn = -1.25 //Mario recieves bonus
{
    if value &gt; 0
    {
        audio_play_sound(snd_spendcoins,0,0);
        if movechoose = 52 //HP bonus
            global.maxMHP += 1;
        if movechoose = 76 //BP bonus
            global.maxMBP += 1;
        if movechoose = 100 //POW bonus
            global.Mpow += 1;
        if movechoose = 124 //DEF bonus
            global.Mdef += 1;
        if movechoose = 148 //SPEED bonus
            global.Mspd += 1;
        if movechoose = 172 //STACHE bonus*/
            global.Mstache += 1;
        value -= 1; //Subtract 1 from exp gained
        alarm[1] = 1;
    }
    else if value = 0 &amp;&amp; moveto = 1.5 //Lakitu moves away
    {
        audio_stop_sound(snd_spendcoins);
        moveto = 3;
        obj_mariob.stance = 13;
        obj_mariob.image_index = 0;
        obj_mariob.x += 2;
        alarm[2] = 1;
    }
}
if global.turn = -1.75 //Luigi recieves bonus
{
    if value &gt; 0
    {
        audio_play_sound(snd_spendcoins,0,0);
        if movechoose = 52 //HP bonus
            global.maxLHP += 1;
        if movechoose = 76 //BP bonus
            global.maxLBP += 1;
        if movechoose = 100 //POW bonus
            global.Lpow += 1;
        if movechoose = 124 //DEF bonus
            global.Ldef += 1;
        if movechoose = 148 //SPEED bonus
            global.Lspd += 1;
        if movechoose = 172 //STACHE bonus*/
            global.Lstache += 1;
        value -= 1; //Subtract 1 from exp gained
        alarm[1] = 1;
    }
    else if value = 0 &amp;&amp; moveto = 1.5 //Lakitu moves away
    {
        sound_stop(snd_spendcoins);
        moveto = 3;
        obj_luigib.stance = 13;
        obj_luigib.image_index = 0;
        obj_luigib.x += 1;
        alarm[2] = 1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Determines how to increase level up bonus chances
if global.turn = -1.25
    scr_MarioBonusLevels();
if global.turn = -1.75
    scr_LuigiBonusLevels();
alarm[0] = 4;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if gamepad_button_check_pressed(0, global.buttonY) || keyboard_check_pressed(global.keyY) //for now (to escape softlock when leveling up)
{
    audio_play_sound(snd_incorrect,0,0); //fail safe
    if instance_number(obj_mariob) &gt; 0 and instance_number(obj_luigib) &gt; 0
    {
        with obj_mariob instance_destroy();
        with obj_luigib instance_destroy();
    }
}

if gamepad_button_check_pressed(0, global.buttonA) || keyboard_check_pressed(global.keyA) //A
{
    if global.turn = -1.25 &amp;&amp; moveto = 2 //Determine roulette chances for Mario's next level up
    {
        if global.Mlastbonus = -1
            global.Mlastbonus = 6;
        else if global.Mlastbonus = 6
        {
            if movechoose = 52 //HP bonus
                global.Mlastbonus = 0;
            if movechoose = 76 //BP bonus
                global.Mlastbonus = 1;
            if movechoose = 100 //POW bonus
                global.Mlastbonus = 2;
            if movechoose = 124 //DEF bonus
                global.Mlastbonus = 3;
            if movechoose = 148 //SPEED bonus
                global.Mlastbonus = 4;
            if movechoose = 172 //STACHE bonus
                global.Mlastbonus = 5;
        }
        else
        {
            if movechoose = 52 &amp;&amp; global.Mlastbonus = 0 //HP bonus
                global.Mlastbonus = 0;
            else if movechoose = 76 &amp;&amp; global.Mlastbonus = 1 //BP bonus
                global.Mlastbonus = 1;
            else if movechoose = 100 &amp;&amp; global.Mlastbonus = 2 //POW bonus
                global.Mlastbonus = 2;
            else if movechoose = 124 &amp;&amp; global.Mlastbonus = 3 //DEF bonus
                global.Mlastbonus = 3;
            else if movechoose = 148 &amp;&amp; global.Mlastbonus = 4 //SPEED bonus
                global.Mlastbonus = 4;
            else if movechoose = 172 &amp;&amp; global.Mlastbonus = 5 //STACHE bonus
                global.Mlastbonus = 5;
            else
                global.Mlastbonus = -1;
        }
        value = value;
        moveto = 1.5;
        audio_stop_sound(snd_roulette);
        audio_play_sound(snd_equip,0,0);
        alarm[1] = 20; //Add bonus
    }
    if global.turn = -1.75 &amp;&amp; moveto = 2 //Determine roulette chances for Luigi's next level up
    {
        if global.Llastbonus = -1
            global.Llastbonus = 6;
        else if global.Llastbonus = 6
        {
            if movechoose = 52 //HP bonus
                global.Llastbonus = 0;
            if movechoose = 76 //BP bonus
                global.Llastbonus = 1;
            if movechoose = 100 //POW bonus
                global.Llastbonus = 2;
            if movechoose = 124 //DEF bonus
                global.Llastbonus = 3;
            if movechoose = 148 //SPEED bonus
                global.Llastbonus = 4;
            if movechoose = 172 //STACHE bonus
                global.Llastbonus = 5;
        }
        else
        {
            if movechoose = 52 &amp;&amp; global.Llastbonus = 0 //HP bonus
                global.Llastbonus = 0;
            else if movechoose = 76 &amp;&amp; global.Llastbonus = 1 //BP bonus
                global.Llastbonus = 1;
            else if movechoose = 100 &amp;&amp; global.Llastbonus = 2 //POW bonus
                global.Llastbonus = 2;
            else if movechoose = 124 &amp;&amp; global.Llastbonus = 3 //DEF bonus
                global.Llastbonus = 3;
            else if movechoose = 148 &amp;&amp; global.Llastbonus = 4 //SPEED bonus
                global.Llastbonus = 4;
            else if movechoose = 172 &amp;&amp; global.Llastbonus = 5 //STACHE bonus
                global.Llastbonus = 5;
            else
                global.Llastbonus = -1;
        }
        value = value;
        moveto = 1.5;
        audio_stop_sound(snd_roulette);
        audio_play_sound(snd_equip,0,0);
        alarm[1] = 20; //Add bonus
    }
    if moveto = 5
    {
        if (global.turn = -1.25 &amp;&amp; global.Mexpleft &gt; 0)
        or (global.turn = -1.75 &amp;&amp; global.Lexpleft &gt; 0)
        {
            moveto = 6;
            background_colour[0] = c_black;
            global.turn = -1.5;
            audio_stop_sound(mus_Fanfare);
            audio_play_sound(snd_confirm,0,0);
            alarm[4] = 1; //Fade out background
        }
    }
}
if gamepad_button_check_pressed(0, global.buttonUp) || keyboard_check_pressed(global.keyUp) //Up
{
    if x = 368 &amp;&amp; y = 24 &amp;&amp; moveto = 0
    {
        audio_play_sound(snd_select,0,0);
        movechoose += -24;
    }
}
if gamepad_button_check_pressed(0, global.buttonDown) || keyboard_check_pressed(global.keyDown) //Down
{
    if x = 368 &amp;&amp; y = 24 &amp;&amp; moveto = 0
    {
        audio_play_sound(snd_select,0,0);
        movechoose += 24;
    }
}

if movechoose &gt; 172
    movechoose = 52;
if movechoose &lt; 52
    movechoose = 172;
if x = 368 &amp;&amp; y = 24 &amp;&amp; moveto = 1
    moveto = 0;
else if moveto &gt; 2
    mp_linear_step(432,24,1,0);
else
    mp_linear_step(368,24,1,0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Draw Lakitu
draw_sprite(sprite_index,image_index,x,y);

//Draw Bonus
draw_line(x,y,x+1,y+movechoose);
draw_line(x+1,y,x+2,y+movechoose);
if moveto = 1.5 or moveto = 2
    draw_sprite_ext(spr_bonuschoosedisplay,-1,x+1,y+movechoose,0.85,0.85,0,-1,1);
else if moveto &lt; 2
    draw_sprite_ext(spr_bonusdisplay,-1,x+1,y+movechoose,0.85,0.85,0,-1,1);
//Determine Bonus stats
if moveto = 1.5 or moveto = 2
    scr_draw_numbers(x-9,y+movechoose-10,value,1,0.85,0.85,0,c_yellow,0.8);   
if moveto = 5
    draw_sprite_ext(spr_mariochoose,-1,room_width-16,room_height-8,1,1,0,-1,0.8);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
